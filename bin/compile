#!/usr/bin/env bash
# bin/compile <build-dir> <cache-dir>

echo "-----> Installing Ghostscript 10.04.0"

BUILD_DIR=$1
PACKAGE="https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs10040/ghostscript-10.04.0-linux-x86_64.tgz"
LOCATION="$BUILD_DIR/vendor/gs"

# Erstelle das Zielverzeichnis
mkdir -p $LOCATION

# Lade das vorgefertigte Ghostscript-Paket herunter und entpacke es
curl -L $PACKAGE | tar xz -C $LOCATION

# Verschiebe die Ghostscript-BinÃ¤rdatei an die richtige Stelle
echo "-----> Setting up Ghostscript runtime"
mkdir -p $BUILD_DIR/.profile.d
echo "export PATH=\"\$HOME/vendor/gs/bin:\$PATH\"" > $BUILD_DIR/.profile.d/ghostscript.sh

echo "-----> Ghostscript installation complete"
